# ๐๏ธ ูุธุงู ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ ููุชุทุจูู
## App Settings System

---

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุถุงูุฉ **ูุธุงู ุฅุนุฏุงุฏุงุช ุดุงูู** ูุณูุญ ูููุณุคูููู ุจุงูุชุญูู ุงููุงูู ูู ุฌููุน ููุฒุงุช ุงูุชุทุจูู ูู ูุงุฌูุฉ ูุงุญุฏุฉ.

---

## โจ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### 1๏ธโฃ **ูุนูููุงุช ุงูุชุทุจูู ุงูุฃุณุงุณูุฉ**
- ุงุณู ุงูุชุทุจูู ูุดุนุงุฑู
- ุจุฑูุฏ ููุงุชู ุงูุฏุนู ุงูููู
- ุฑูุงุจุท ูุณุงุฆู ุงูุชูุงุตู ุงูุงุฌุชูุงุนู (Facebook, Twitter, Instagram, YouTube)
- ุฑูุงุจุท ุงูุดุฑูุท ูุงูุฃุญูุงู ูุณูุงุณุฉ ุงูุฎุตูุตูุฉ

### 2๏ธโฃ **ุชูุนูู/ุฅููุงู ุงูููุฒุงุช**
ูููู ุชุดุบูู ุฃู ุฅููุงู ุงูููุฒุงุช ุงูุชุงููุฉ ุจููุฑุฉ ูุงุญุฏุฉ:
- ๐๏ธ ุบุฑู ุงูุตูุช
- ๐ ูุธุงู ุงููุฏุงูุง
- ๐ ุงููุทุงุจูุฉ ุงูุฐููุฉ
- ๐ต ุบุฑู ุงูููุณููู
- ๐ข ูุธุงู ุงูููุงูุงุช
- ๐๏ธ ุงููุชุฌุฑ
- ๐ฎ ุงูุฃูุนุงุจ

### 3๏ธโฃ **ุงูุญุฏูุฏ ูุงููููุฏ**
- ุงูุญุฏ ุงูุฃุฏูู ููุนูุฑ (13-21)
- ุทูู ุงุณู ุงููุณุชุฎุฏู ุงูุฃูุตู (5-50)
- ุทูู ุงููุจุฐุฉ ุงูุฃูุตู (100-1000)
- ุณุนุฉ ุงูุบุฑูุฉ ุงููุตูู (10-1000)
- ุนุฏุฏ ุงููุฏุงูุง ุงูููููุฉ ููู ูุณุชุฎุฏู (10-500)

### 4๏ธโฃ **ุงูุงูุชุตุงุฏ ูุงูุนููุงุช**
- ุนููุงุช ุงูุชุณุฌูู ุงูุงูุชุฑุงุถูุฉ (0-10000)
- ูุงุณุงุช ุงูุชุณุฌูู ุงูุงูุชุฑุงุถูุฉ (0-1000)
- ูุณุจุฉ ุชุญููู ุงูุนููุงุช ุฅูู ุงููุงุณุงุช
- ุนูููุฉ ุงูููุตุฉ ุนูู ุงููุฏุงูุง (0-50%)

### 5๏ธโฃ **ุงูุฃูุงู ูุงูุชุญูู**
- ุทูุจ ุงูุชุญูู ูู ุงููุงุชู
- ุทูุจ ุงูุชุญูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- ุงููุตุงุฏูุฉ ุงูุซูุงุฆูุฉ
- ุงูุญุฏ ุงูุฃุฏูู ูุทูู ูููุฉ ุงููุฑูุฑ (6-20)
- ุนุฏุฏ ุงูุชูุงุฑูุฑ ููุญุธุฑ ุงูุชููุงุฆู (3-20)
- ููุชุฑ ุงููููุงุช ุงูุจุฐูุฆุฉ
- ุทูุจ ุตูุฑุฉ ููู ุดุฎุตู ุฅูุฒุงููุฉ

### 6๏ธโฃ **ุงูุฅุดุนุงุฑุงุช**
- ุฅุดุนุงุฑุงุช ุงูุฏูุน (Push Notifications)
- ุฅุดุนุงุฑุงุช ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- ุฅุดุนุงุฑุงุช ุงูุฑุณุงุฆู ุงููุตูุฉ (SMS)

### 7๏ธโฃ **ุงูุชุญูููุงุช**
- ุชุชุจุน ูุดุงุท ุงููุณุชุฎุฏููู
- ุชุญูููุงุช ุงููุฏุงูุง
- ุชุญูููุงุช ุงูุบุฑู

### 8๏ธโฃ **ูุถุน ุงูุตูุงูุฉ** โ๏ธ
- ุชูุนูู/ุฅููุงู ูุถุน ุงูุตูุงูุฉ
- ุฑุณุงูุฉ ูุฎุตุตุฉ ูููุณุชุฎุฏููู ุฃุซูุงุก ุงูุตูุงูุฉ

---

## ๐๏ธ ุงููููุงุช ุงูุฌุฏูุฏุฉ

### 1. **Service Layer**
```
src/services/AppSettingsService.ts
```
- `getSettings()` - ุฌูุจ ุงูุฅุนุฏุงุฏุงุช ุงูุญุงููุฉ
- `updateSettings(updates, updatedBy)` - ุชุญุฏูุซ ุงูุฅุนุฏุงุฏุงุช
- `resetToDefaults()` - ุฅุนุงุฏุฉ ุชุนููู ููููู ุงูุงูุชุฑุงุถูุฉ
- `isMaintenanceMode()` - ูุญุต ูุถุน ุงูุตูุงูุฉ
- `isFeatureEnabled(feature)` - ูุญุต ุฅุฐุง ูุงูุช ููุฒุฉ ููุนููุฉ
- `getSetting(key)` - ุฌูุจ ูููุฉ ุฅุนุฏุงุฏ ูุนููู

### 2. **UI Page**
```
src/pages/admin/AppSettings.tsx
```
ูุงุฌูุฉ ุฅุฏุงุฑุฉ ุดุงููุฉ ูุน:
- **6 ุชุจููุจุงุช** (ุนุงูุ ุงูููุฒุงุชุ ุงูุญุฏูุฏุ ุงูุงูุชุตุงุฏุ ุงูุฃูุงูุ ูุชูุฏู)
- ุฃุฒุฑุงุฑ ุญูุธ ูุฅุนุงุฏุฉ ุชุนููู
- ูุงุฌูุฉ ุนุฑุจูุฉ ุจุงููุงูู
- ุชุญุฏูุซ ููุฑู ููุญููู

### 3. **Database Schema**
```
supabase/schema.sql
```
ุฌุฏูู ุฌุฏูุฏ: `app_settings`
- **50+ ุญูู** ูุฅุนุฏุงุฏุงุช ุงูุชุทุจูู
- RLS policies (ูุฑุงุกุฉ ููุฌููุนุ ุชุนุฏูู ูููุณุคูููู ููุท)
- Auto-update timestamp trigger

### 4. **TypeScript Types**
```
src/types/database.types.ts
```
ุฃููุงุน ูุงููุฉ:
- `DbAppSettings` - ููุน ุงูุตู
- `DbAppSettingsInsert` - ููุน ุงูุฅุฏุฑุงุฌ
- `DbAppSettingsUpdate` - ููุน ุงูุชุญุฏูุซ

---

## ๐ง ููููุฉ ุงูุงุณุชุฎุฏุงู

### ูููุณุคูููู:
1. ุงูุชูู ุฅูู `/admin/settings`
2. ุงุฎุชุฑ ุงูุชุจููุจ ุงูููุงุณุจ
3. ุนุฏูู ุงูุฅุนุฏุงุฏุงุช ุงููุทููุจุฉ
4. ุงุถุบุท "๐พ ุญูุธ ุฌููุน ุงูุชุบููุฑุงุช"

### ูููุทูุฑูู:

#### ูุญุต ููุฒุฉ ูุนูููุฉ:
```typescript
import { AppSettingsService } from "@/services/AppSettingsService";

const isGiftsEnabled = await AppSettingsService.isFeatureEnabled('enable_gifts');
if (isGiftsEnabled) {
  // ุนุฑุถ ูุธุงู ุงููุฏุงูุง
}
```

#### ุฌูุจ ุฅุนุฏุงุฏ ูุนููู:
```typescript
const minAge = await AppSettingsService.getSetting('min_age');
console.log(`ุงูุญุฏ ุงูุฃุฏูู ููุนูุฑ: ${minAge}`);
```

#### ูุญุต ูุถุน ุงูุตูุงูุฉ:
```typescript
const isDown = await AppSettingsService.isMaintenanceMode();
if (isDown) {
  return <MaintenancePage />;
}
```

#### ุชุญุฏูุซ ุฅุนุฏุงุฏุงุช:
```typescript
await AppSettingsService.updateSettings({
  enable_voice_chat: false,
  maintenance_mode: true,
  maintenance_message: "ูุนูู ุนูู ุชุญุฏูุซ ุงูุณูุฑูุฑุงุช"
}, "admin_user_id");
```

---

## ๐จ ุชูุณูู ุงููุงุฌูุฉ

### ุงูุชุจููุจุงุช ุงูุณุชุฉ:

1. **ุนุงู** - ูุนูููุงุช ุงูุชุทุจูู ูุฑูุงุจุท ุงูุชูุงุตู
2. **ุงูููุฒุงุช** - ุชุดุบูู/ุฅููุงู ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ
3. **ุงูุญุฏูุฏ** - ุชุญุฏูุฏ ุงููููุฏ ุงููุตูู
4. **ุงูุงูุชุตุงุฏ** - ุฅุนุฏุงุฏุงุช ุงูุนููุงุช ูุงููุงุณุงุช
5. **ุงูุฃูุงู** - ุฅุนุฏุงุฏุงุช ุงูุชุญูู ูุงูุฃูุงู
6. **ูุชูุฏู** - ุงูุฅุดุนุงุฑุงุชุ ุงูุชุญูููุงุชุ ูุถุน ุงูุตูุงูุฉ

### ุงูุฃููุงู ูุงูุฃููููุงุช:
- โ ุฃุฎุถุฑ ููุชูุนูู
- โ ุฃุญูุฑ ููุฅููุงู
- โ๏ธ ุฃุตูุฑ ููุชุญุฐูุฑุงุช (ูุถุน ุงูุตูุงูุฉ)
- ๐ ุฃุฒุฑู ูุฅุนุงุฏุฉ ุงูุชุนููู

---

## ๐ ุงูุฃูุงู

### Row Level Security (RLS):
- **ุงููุฑุงุกุฉ**: ูุณููุญ ููุฌููุน (ุนุงูุฉ)
- **ุงูุชุญุฏูุซ**: ูุณููุญ ูููุณุคูููู ููุท
- **ุงูุญุฐู**: ููููุน (ุฌุฏูู ุจุตู ูุงุญุฏ ููุท)

### Constraint:
```sql
CONSTRAINT single_row_only CHECK (id = 1)
```
ูุถูู ูุฌูุฏ ุตู ูุงุญุฏ ููุท ูู ุงูุฌุฏูู.

---

## ๐ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฌุฏูู `app_settings`:

| ุงูุนููุฏ | ุงูููุน | ุงูุงูุชุฑุงุถู | ุงููุตู |
|--------|------|-----------|-------|
| `id` | INTEGER | 1 | ุงููุนุฑู ุงููุญูุฏ |
| `app_name` | TEXT | 'Voice Chat App' | ุงุณู ุงูุชุทุจูู |
| `enable_voice_chat` | BOOLEAN | TRUE | ุชูุนูู ุบุฑู ุงูุตูุช |
| `default_signup_coins` | INTEGER | 1000 | ุนููุงุช ุงูุชุณุฌูู |
| `maintenance_mode` | BOOLEAN | FALSE | ูุถุน ุงูุตูุงูุฉ |
| `updated_at` | TIMESTAMP | NOW() | ุขุฎุฑ ุชุญุฏูุซ |
| `updated_by` | TEXT | NULL | ูู ูุงู ุจุงูุชุญุฏูุซ |

*(ูุฃูุซุฑ ูู 50 ุญูู ุขุฎุฑ)*

---

## ๐ ุงูุชูุงูู ูุน ุงูููุฏ ุงูููุฌูุฏ

### AuthService:
```typescript
// ูู ุชุณุฌูู ูุณุชุฎุฏู ุฌุฏูุฏ:
const settings = await AppSettingsService.getSettings();
const newUser = {
  ...userData,
  coins: settings.default_signup_coins,
  diamonds: settings.default_signup_diamonds
};
```

### GiftService:
```typescript
// ูุจู ุฅุฑุณุงู ูุฏูุฉ:
const settings = await AppSettingsService.getSettings();
if (!settings.enable_gifts) {
  throw new Error("ูุธุงู ุงููุฏุงูุง ูุนุทูู ุญุงูููุง");
}
```

### VoiceChat:
```typescript
// ูุจู ุฅูุดุงุก ุบุฑูุฉ:
const maxCapacity = await AppSettingsService.getSetting('max_room_capacity');
if (participants.length > maxCapacity) {
  throw new Error(`ุงูุญุฏ ุงูุฃูุตู ${maxCapacity} ูุดุงุฑู`);
}
```

---

## ๐ ุงููุฒุงูุง

### 1. **ูุฑููุฉ ุนุงููุฉ**
- ุชุบููุฑ ุฃู ุฅุนุฏุงุฏ ุฏูู ุงูุญุงุฌุฉ ูุฅุนุงุฏุฉ ูุดุฑ ุงูููุฏ
- ุชุฌุฑุจุฉ ููุฒุงุช ุฌุฏูุฏุฉ ุจุณูููุฉ

### 2. **ุฃูุงู ูุญูู**
- RLS policies ุชููุน ุงูุชุนุฏููุงุช ุบูุฑ ุงููุตุฑุญ ุจูุง
- ุชุชุจุน ูู ูุงู ุจุงูุชุญุฏูุซ ููุชู

### 3. **ุณูููุฉ ุงูุงุณุชุฎุฏุงู**
- ูุงุฌูุฉ ุนุฑุจูุฉ ูุงุถุญุฉ
- ุชุจููุจุงุช ููุธูุฉ
- ุญูุธ ุฌููุน ุงูุชุบููุฑุงุช ุฏูุนุฉ ูุงุญุฏุฉ

### 4. **ุฏุนู Demo Mode**
- ูุนูู ูุน localStorage ุฅุฐุง ูู ููู Supabase ูุชุงุญ
- ูุง ูุชุทูุจ ูุงุนุฏุฉ ุจูุงูุงุช ููุชุทููุฑ ุงููุญูู

---

## ๐ ููุงุญุธุงุช ูููุฉ

### โ๏ธ ูุถุน ุงูุตูุงูุฉ
ุนูุฏ ุชูุนูู ูุถุน ุงูุตูุงูุฉ:
1. ูุชู ููุน ุฌููุน ุงููุณุชุฎุฏููู ูู ุงูุฏุฎูู
2. ุชุธูุฑ ุฑุณุงูุฉ ุงูุตูุงูุฉ ุงููุฎุตุตุฉ
3. ูุฌุจ ุฅููุงูู ูุฏูููุง ุจุนุฏ ุงูุชูุงุก ุงูุตูุงูุฉ

### ๐พ ุงูุญูุธ
- ุฌููุน ุงูุชุบููุฑุงุช ุชูุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ูุชู ุงูุชุฎุฒูู ุงููุญูู ููุณุฎุฉ ุงุญุชูุงุทูุฉ
- ููุณุฌูู ุชุงุฑูุฎ ููู ูุงู ุจุงูุชุญุฏูุซ

### ๐ ุฅุนุงุฏุฉ ุงูุชุนููู
- ุฒุฑ "ุฅุนุงุฏุฉ ุงูุชุนููู" ูุนูุฏ **ุฌููุน** ุงูุฅุนุฏุงุฏุงุช ููุงูุชุฑุงุถูุฉ
- ูุชุทูุจ ุชุฃููุฏ ูุจู ุงูุชูููุฐ
- ูุง ูููู ุงูุชุฑุงุฌุน ุจุนุฏ ุงูุชุฃููุฏ

---

## ๐ฏ ุญุงูุงุช ุงูุงุณุชุฎุฏุงู ุงูุดุงุฆุนุฉ

### 1. ุชุนุทูู ููุฒุฉ ูุคูุชูุง:
```
ุงูููุฒุงุช โ ุฅููุงู "ูุธุงู ุงููุฏุงูุง" โ ุญูุธ
```

### 2. ุชูุนูู ูุถุน ุงูุตูุงูุฉ:
```
ูุชูุฏู โ ุชูุนูู "ูุถุน ุงูุตูุงูุฉ" โ ูุชุงุจุฉ ุฑุณุงูุฉ โ ุญูุธ
```

### 3. ุชุนุฏูู ุงูุนูููุฉ:
```
ุงูุงูุชุตุงุฏ โ ุนูููุฉ ุงูููุตุฉ = 15% โ ุญูุธ
```

### 4. ุชูุนูู ุงูุชุญูู ูู ุงููุงุชู:
```
ุงูุฃูุงู โ ุชูุนูู "ุทูุจ ุงูุชุญูู ูู ุงููุงุชู" โ ุญูุธ
```

---

## ๐ฎ ุงูุชุญุณููุงุช ุงููุณุชูุจููุฉ

- [ ] ุงุณุชูุฑุงุฏ/ุชุตุฏูุฑ ุงูุฅุนุฏุงุฏุงุช ูููู JSON
- [ ] ุณุฌู ุชุงุฑูุฎู ูุฌููุน ุงูุชุนุฏููุงุช
- [ ] ุฅุนุฏุงุฏุงุช ูุฎุชููุฉ ุญุณุจ ุงูุจูุฆุฉ (dev/staging/prod)
- [ ] ุฌุฏููุฉ ุชุบููุฑ ุงูุฅุนุฏุงุฏุงุช (ูุซูุงู: ุตูุงูุฉ ุฃูุชููุงุชูููุฉ ูู ุฃุณุจูุน)
- [ ] ุฅุดุนุงุฑุงุช ุนูุฏ ุชุบููุฑ ุฅุนุฏุงุฏุงุช ุญุฑุฌุฉ

---

## โ ุงูุฎูุงุตุฉ

ูุธุงู **ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ** ุงูุขู:
- โ **50+ ุฅุนุฏุงุฏ** ูุงุจู ููุชุนุฏูู
- โ ูุงุฌูุฉ **ุนุฑุจูุฉ** ูุงููุฉ ูุน **6 ุชุจููุจุงุช**
- โ ุชูุงูู ูุน **Supabase** + **localStorage**
- โ **RLS** ููุฃูุงู
- โ **TypeScript** types ูุงููุฉ
- โ ุณูููุฉ ุงุณุชุฎุฏุงู ูููุณุคูููู ูุงููุทูุฑูู

---

**๐ ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงูููุฑู!**

ูููุตูู ููุตูุญุฉ:
```
/admin/settings
```

---

*ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ GitHub Copilot - 8 ุฏูุณูุจุฑ 2025*
